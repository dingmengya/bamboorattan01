<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>竹属图片</title>
    <link rel="stylesheet" type="text/css" href="../css/aui.css" />
    <!-- <link rel="stylesheet" type="text/css" href="../css/summernote.min.css" /> -->
    <style>
    header{ background-color: #dfffdf !important; color: black !important;}
    #aui-header {

    }
    #aui-header .aui-iconfont {
      color: black !important;
    }
        .aui-card-list {
            margin-bottom: 0;
        }
        img{
          height: 100px;
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
        }
    </style>
</head>
<body>
  <header class="aui-bar aui-bar-nav" id="aui-header">
      <a class="aui-btn aui-pull-left" type="button" name="Submit" value="返回上一页" onclick="javascript:window.history.back(-1);">
          <span class="aui-iconfont aui-icon-left"></span>
      </a>
      <div class="aui-title" id="genusName">刚竹属</div>
  </header>
    <section class="aui-content aui-padded-l-5 aui-padded-r-10 aui-padded-t-5">
        <div class="aui-row aui-row-padded">
            <div class="aui-col-xs-6">
                <div class="aui-card-list">
                    <div class="aui-card-list-content">
                      <img src="../image/d3.jpg">
                    </div>
                    <div class="aui-card-list-header aui-font-size-14">
                      <h4></h4>
                    </div>
                </div>
            </div>
            <div class="aui-col-xs-6">
                <div class="aui-card-list">
                    <div class="aui-card-list-content">
                      <img src="../image/d3.jpg">
                    </div>
                    <div class="aui-card-list-header aui-font-size-14">
                      <h4></h4>
                    </div>
                </div>
            </div>
            <div class="aui-col-xs-6">
                <div class="aui-card-list">
                    <div class="aui-card-list-content">
                      <img src="../image/d3.jpg">
                    </div>
                    <div class="aui-card-list-header aui-font-size-14">
                      <h4></h4>
                    </div>
                </div>
            </div>
            <div class="aui-col-xs-6">
                <div class="aui-card-list">
                    <div class="aui-card-list-content">
                      <img src="../image/d3.jpg">
                    </div>
                    <div class="aui-card-list-header aui-font-size-14">
                      <h4></h4>
                    </div>
                </div>
            </div>
            <div class="aui-col-xs-6">
                <div class="aui-card-list">
                    <div class="aui-card-list-content">
                      <img src="../image/d3.jpg">
                    </div>
                    <div class="aui-card-list-header aui-font-size-14">
                      <h4></h4>
                    </div>
                </div>
            </div>
            <div class="aui-col-xs-6">
                <div class="aui-card-list">
                    <div class="aui-card-list-content">
                      <img src="../image/d3.jpg">
                    </div>
                    <div class="aui-card-list-header aui-font-size-14">
                      <h4></h4>
                    </div>
                </div>
            </div>
            <div class="aui-col-xs-6">
                <div class="aui-card-list">
                    <div class="aui-card-list-content">
                      <img src="../image/d3.jpg">
                    </div>
                    <div class="aui-card-list-header aui-font-size-14">
                      <h4></h4>
                    </div>
                </div>
            </div>
            <div class="aui-col-xs-6">
                <div class="aui-card-list">
                    <div class="aui-card-list-content">
                      <img src="../image/d3.jpg">
                    </div>
                    <div class="aui-card-list-header aui-font-size-14">
                      <h4></h4>
                    </div>
                </div>
            </div>
            <div class="aui-col-xs-6">
                <div class="aui-card-list">
                    <div class="aui-card-list-content">
                      <img src="../image/d3.jpg">
                    </div>
                    <div class="aui-card-list-header aui-font-size-14">
                      <h4></h4>
                    </div>
                </div>
            </div>
            <div class="aui-col-xs-6">
                <div class="aui-card-list">
                    <div class="aui-card-list-content">
                      <img src="../image/d3.jpg">
                    </div>
                    <div class="aui-card-list-header aui-font-size-14">
                      <h4></h4>
                    </div>
                </div>
            </div>
            <div class="aui-col-xs-6">
                <div class="aui-card-list">
                    <div class="aui-card-list-content">
                      <img src="../image/d3.jpg">
                    </div>
                    <div class="aui-card-list-header aui-font-size-14">
                      <h4></h4>
                    </div>
                </div>
            </div>
            <div class="aui-col-xs-6">
                <div class="aui-card-list">
                    <div class="aui-card-list-content">
                      <img src="../image/d3.jpg">
                    </div>
                    <div class="aui-card-list-header aui-font-size-14">
                      <h4></h4>
                    </div>
                </div>
            </div>
            <div class="aui-col-xs-6">
                <div class="aui-card-list">
                    <div class="aui-card-list-content">
                      <img src="../image/d3.jpg">
                    </div>
                    <div class="aui-card-list-header aui-font-size-14">
                      <h4></h4>
                    </div>
                </div>
            </div>
            <div class="aui-col-xs-6">
                <div class="aui-card-list">
                    <div class="aui-card-list-content">
                      <img src="../image/d3.jpg">
                    </div>
                    <div class="aui-card-list-header aui-font-size-14">
                      <h4></h4>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- <script type="text/javascript" src="../script/propper.min.js"></script> -->
    <script type="text/javascript" src="../script/jquery-2.2.4.min.js"></script>
    <script type="text/javascript" src="../script/bootstrap.min.js"></script>
</body>
<!-- <script type="text/javascript" src="..script/genus.js"></script> -->
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/ipaddress.js"></script>

<!-- <script type="text/javascript" src="../script/summernote.js"></script> -->
<script type="text/javascript">
 apiready = function(){
   api.parseTapmode();
   var header = $api.byId('aui-header');
   $api.fixStatusBar(header);
   var headerPos = $api.offset(header);
   var body_h = $api.offset($api.dom('body')).h;

   var genusId=getUrlParam('genusId');
   loadGenus(genusId);
};

//根据名称获取地址栏的参数值
var getUrlParam = function (name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
    var r = window.location.search.substr(1).match(reg);
    if (r != null) return decodeURI(r[2]); return null;
}

function loadGenus(genusId){
api.ajax({
    url:baseUrl+'/genus/findId/'+genusId,
    method: 'GET',
    dataType:'json',
    headers: {
        'Content-Type': 'application/json;charset=utf-8'
    },
    data: {
      values: {
       name: 'elements'
     }
    }
  },function(ret,err){
    if(ret){
        var genus=ret.data;
        if(genus!=null){
            $('#genusName').html(genus.genusNameCh)
            // console.log(genus.genusNameCh);
            loadSpeces(genusId,genus.genusNameCh);
        }
    }else {
        api.alert({ msg: JSON.stringify(err) });
    }
  });

}
function loadSpeces(genusId,genusNameCh){
    $.ajax({
        url:baseUrl+'/spec/findAll',
        type:'GET',
        success:function(response){

            if(response.code==200){
                var speces=response.data;

                if(speces!=null&&speces.length>0){
                    var html='';
                    for(var i=0;i<speces.length;i++){
                        var spec=speces[i];
                        if(spec.genus!=null&&spec.genus.genusId==genusId){
                            var img='';
                            if(spec.files!=null&&spec.files.length>0){
                                for(var j=0;j<spec.files.length;j++){
                                    var file=spec.files[j];
                                    if(file.type=='image'){
                                        img=baseUrl+'/'+ file.path;
                                        // console.log(img);
                                        break;
                                    }
                                }
                            }
                            // console.log(spec.specId);

                            html+='\
                                <div class="aui-col-xs-6">\
                                <div class="aui-card-list">\
                                    <div class="aui-card-list-content" data-id="'+spec.specId+'">\
                                        <img src="'+img+'">\
                                    </div>\
                                    <div class="aui-card-list-header aui-font-size-14">\
                                        <h4>'+spec.specNameCh+'</h4>\
                                    </div>\
                                </div>\
                                </div>\
                            ';
                        }
                    }
                    $('.aui-row-padded').html(html);
                    $('.aui-card-list-content').on('click',function(){
                        location.href='specdetail.html?specId='+$(this).attr('data-id');

                    });
                }
            }
        }
    });
}
function closeWin(){
    api.closeWin({
    });
}
</script>
</html>
